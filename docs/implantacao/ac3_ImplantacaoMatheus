# Criação de dados através da ferramenta Banco de dados SQL server 2017

CREATE TABLE FABRICANTE (     
Id_Fabricante INT,
Nome VARCHAR (100)NOT NULL UNIQUE,  
Telefone VARCHAR (11) NOT NULL ,   
Contato VARCHAR (30) NOT NULL CONSTRAINT DFNUMTELEFONE DEFAULT ('N/D'),   
PRIMARY KEY (Id_Fabricante)
);
CREATE TABLE ANO (
IdAno INT NOT NULL,
Ano DATETIME UNIQUE , 
PRIMARY KEY (IdAno),
CONSTRAINT CK_Ano CHECK (Ano > 1970) 
); 

CREATE TABLE MODELO (
IdModelo INT,  
    Descricao VARCHAR (50) NOT NULL,
CONSTRAINT PKMODELO PRIMARY KEY (IdModelo) 
);

CREATE TABLE VEICULO (
IdVeiculo INT NOT NULL,
Descricao VARCHAR (50), 
Valor FLOAT,
IdModelo INT NOT NULL ,
Id_Fabricante INT,
IdAnoFabricacao INT,
DataCompra DATETIME NOT NULL,
CONSTRAINT PKVEICULO PRIMARY KEY (IdVeiculo),
CONSTRAINT FKVEICULOID_MODELO FOREIGN KEY (IdModelo)   REFERENCES MODELO(IdModelo),
CONSTRAINT FKVEICULOID_FABRICANTE FOREIGN KEY (Id_Fabricante)   REFERENCES FABRICANTE(Id_Fabricante),
CONSTRAINT FKVEICULOID_ANO FOREIGN KEY (IdAnoFabricacao)   REFERENCES ANO(IdAno)
);

CREATE TABLE ENDERECO (
   IdFabricante INT,
   UF VARCHAR(2) NOT NULL,
   Cidade VARCHAR (50) NOT NULL,
   Endereco VARCHAR (50) NOT NULL,
   CONSTRAINT FKENDERECOID_FABRICANTE FOREIGN KEY (idFABRICANTE)   REFERENCES FABRICANTE(Id_Fabricante)
);

CREATE TABLE MES ( 
    Id_Mes INT,
    MES VARCHAR (50) NOT NULL UNIQUE,
    PRIMARY KEY (Id_Mes),
    CONSTRAINT CK_MES CHECK (MES > 0 AND MES < 13)
);

CREATE TABLE VENDASANUAIS( 
  Id_VENDAS INT,
  QTD INT NOT NULL,
  Id_Veiculo INT ,
  Id_AnoDaVenda INT,
  Id_MesDaVenda INT, 
  CONSTRAINT PK_Id_Vendas PRIMARY KEY CLUSTERED (Id_Veiculo, Id_AnoDaVenda, Id_MesDaVenda),
  CONSTRAINT FKVENDASANUAISID_VEICULO FOREIGN KEY (Id_Veiculo)   REFERENCES VEICULO(IdVeiculo),
  CONSTRAINT FKVENDASANUAIS_Id_AnoDaVenda FOREIGN KEY (Id_AnoDaVenda)   REFERENCES ANO(IdAno),
  CONSTRAINT FKVENDASANUAIS_Id_MesDaVenda FOREIGN KEY (Id_MesDaVenda)   REFERENCES MES(Id_Mes)
);
